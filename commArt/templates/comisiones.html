<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Comisiones</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/comisionesStyle.css') }}">
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
    <div class="logo" onclick="location.href='{{ url_for('inicio') }}'">
        <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo">
        <span class="nombre-app">ComArt</span>
    </div>
    <div class="buscador">
        <input type="text" placeholder="Buscar...">
    </div>
    <div class="icono-usuario" onclick="toggleDropdown()">
        <img src="{{ url_for('static', filename='img/user_icon.png') }}" alt="Usuario">
        <div id="dropdown" class="dropdown-menu hidden">
            <a href="{{ url_for('perfil') }}">Ver perfil</a>
            <a href="{{ url_for('login') }}"><i class="fa fa-sign-out-alt"></i> Cerrar sesi√≥n</a>
        </div>
    </div>
</nav>

<main class="contenedor-comisiones">
    <div class="filtros-comisiones">
        <button class="filtro-btn {{ 'activo' if filtro == 'espera' else '' }}" onclick="filtrar('En espera')">
            comisiones en espera
        </button>
        <button class="filtro-btn {{ 'activo' if filtro == 'abiertas' else '' }}" onclick="filtrar('Abierta')">
            comisiones abiertas
        </button>
        <button class="filtro-btn {{ 'activo' if filtro == 'acabadas' else '' }}" onclick="filtrar('Acabada')">
            comisiones acabadas
        </button>
    </div>

    <div class="lista-comisiones">
        {% for comision in comisiones %}
        <div class="comision-caja">
            <div class="comision-icono">
                {% if comision.tipo == 'solicitud_directa' %}
                <span class="icono-sobre"></span>
                {% else %}
                <span class="icono-carpeta"></span>
                {% endif %}
            </div>

            <div class="comision-contenido">
                <p class="comision-descripcion">
                    {{ comision.descripcion | truncate(50, True, '...') }}
                </p>
                <p class="comision-meta">
                    creado por {{ comision.creador }} el {{ comision.fecha }}
                </p>
            </div>

            <div class="comision-estado-o-acciones">
                {% if comision.tipo == 'solicitud_directa' and comision.estado == 'espera' %}
                <div class="acciones-solicitud">
                    <button class="btn-aceptar"><span class="icono-tick"></span></button>
                    <button class="btn-rechazar"><span class="icono-x"></span></button>
                </div>
                {% else %}
                <span class="estado-comision">
                                {{ comision.estado.upper() }}
                            </span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</main>

<!-- Footer -->
<footer class="footer">
    <button onclick="location.href='{{ url_for('inicio') }}'" class="boton-footer">Inicio</button>
    <button onclick="location.href='{{ url_for('comisiones') }}'" class="boton-footer activo">Comisiones</button>
    <button onclick="location.href='{{ url_for('notificaciones') }}'" class="boton-footer">Notificaciones</button>
    <button onclick="location.href='{{ url_for('perfil') }}'" class="boton-footer">Perfil</button>
</footer>

</body>
</html>
